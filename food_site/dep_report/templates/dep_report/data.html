<!-- sku_manage/templates/ingredient.html -->
<!DOCTYPE html>
<html>
	{% load staticfiles %}
	{% load static %}
	{% load render_table from django_tables2 %}
	{% load bootstrap3 %}
	<head>
		<meta charset="utf-8">
        	<title>HypoMeals</title>
        	<link rel="stylesheet" type="text/css" href="{% static "sku_manage/data.css" %}" />
	</head>
	<body>
		{% if user.is_authenticated %}
		<h1>Ingredient Dependency Reporting</h1>
		<button class="collapsible">Filter Data</button>
		<div class="content">
		{% if filter %}
			<form action="" method-"get" class="form form-inline">
				{% bootstrap_form filter.form layout='inline' %}
				{% bootstrap_button 'filter' %}
			</form>
		{% endif %}
		</div>
		<script>
			var coll = document.getElementsByClassName("collapsible");
			var i;

			for (i = 0; i < coll.length; i++) {
  				coll[i].addEventListener("click", function() {
    				this.classList.toggle("active");
    				var content = this.nextElementSibling;
    				if (content.style.display === "block") {
      					content.style.display = "none";
    				} else {
      					content.style.display = "block";
    				}
  				});
			}			
		</script>
		{% if table.rows %}
			<p>{{ table.rows|length }} result(s)</p>
		{% endif %}
		<form action="{% url 'ingr_dep_generate' %}" method="post">
		{% csrf_token %}
			<input type="submit" value="Generate">
			<div style="overflow-x:auto;">
			{% render_table table %}
			</div>
		</form>
		<form method="get">
			{% if paginated %}
				<input type="submit" name="remove_pagination" value="View All Records">
			{% else %}
				<input type="submit" name="add_pagination" value="Paged View">
			{% endif %}
		</form>
		{% else %}
		<h1>You must be logged in to view data</h1>
		{% endif %}
	</body>
</html>
